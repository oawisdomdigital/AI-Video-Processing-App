{"ast":null,"code":"import React,{useState,useRef}from\"react\";import axios from\"axios\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[video,setVideo]=useState(null);const[processedVideo,setProcessedVideo]=useState(null);const[loading,setLoading]=useState(false);const[progress,setProgress]=useState(0);const[cancelTokenSource,setCancelTokenSource]=useState(null);const[startTime,setStartTime]=useState(\"\");const[endTime,setEndTime]=useState(\"\");const[transcription,setTranscription]=useState(\"\");const[overlay,setOverlay]=useState(null);const videoRef=useRef(null);const handleFileChange=e=>{setVideo(e.target.files[0]);};const handleOverlayChange=e=>{setOverlay(e.target.files[0]);};const handleUpload=async()=>{if(!video){toast.error(\"Please upload a video!\");return;}const formData=new FormData();formData.append(\"file\",video);formData.append(\"start_time\",startTime);formData.append(\"end_time\",endTime);if(overlay){formData.append(\"overlay\",overlay);}setLoading(true);setProgress(0);const source=axios.CancelToken.source();setCancelTokenSource(source);try{const response=await axios.post(\"http://127.0.0.1:8000/api/videos/upload/\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"},cancelToken:source.token});toast.success(\"Video uploaded successfully! Processing started.\");const videoId=response.data.id;// Start polling\npollProcessingStatus(videoId);}catch(error){if(axios.isCancel(error)){toast.info(\"Upload canceled.\");}else{var _error$response;toast.error(\"Error uploading video!\");console.error(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);}setLoading(false);}};const pollProcessingStatus=async videoId=>{try{const response=await axios.get(\"http://127.0.0.1:8000/api/videos/status/\".concat(videoId,\"/\"));const{progress,video_url,status,transcription}=response.data;setProgress(progress);if(status===\"completed\"){toast.success(\"Processing completed!\");setProcessedVideo(video_url);setTranscription(transcription);setLoading(false);}else if(status===\"failed\"){toast.error(\"Processing failed!\");setLoading(false);}else{setTimeout(()=>pollProcessingStatus(videoId),3000);}}catch(error){toast.error(\"Error fetching processing status.\");setLoading(false);}};const handleCancel=()=>{if(cancelTokenSource){cancelTokenSource.cancel(\"Upload canceled by the user.\");setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Advanced Video Editor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,accept:\"video/*\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleOverlayChange,accept:\"image/*\",placeholder:\"Overlay Image\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Start Time:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:startTime,onChange:e=>setStartTime(e.target.value),placeholder:\"00:00:00\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"End Time:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:endTime,onChange:e=>setEndTime(e.target.value),placeholder:\"00:00:00\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:loading,children:loading?\"Processing...\":\"Upload and Process\"}),loading&&/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,children:\"Cancel\"}),loading&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Progress: \",progress,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",background:\"#ddd\",height:\"20px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat(progress,\"%\"),background:\"green\",height:\"100%\"}})})]}),processedVideo&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Processed Video\"}),/*#__PURE__*/_jsx(\"video\",{src:\"http://127.0.0.1:8000\".concat(processedVideo),controls:true}),/*#__PURE__*/_jsx(\"h3\",{children:\"Transcription\"}),/*#__PURE__*/_jsx(\"p\",{children:transcription})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default App;","map":{"version":3,"names":["React","useState","useRef","axios","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","App","video","setVideo","processedVideo","setProcessedVideo","loading","setLoading","progress","setProgress","cancelTokenSource","setCancelTokenSource","startTime","setStartTime","endTime","setEndTime","transcription","setTranscription","overlay","setOverlay","videoRef","handleFileChange","e","target","files","handleOverlayChange","handleUpload","error","formData","FormData","append","source","CancelToken","response","post","headers","cancelToken","token","success","videoId","data","id","pollProcessingStatus","isCancel","info","_error$response","console","message","get","concat","video_url","status","setTimeout","handleCancel","cancel","children","type","onChange","accept","placeholder","value","onClick","disabled","style","width","background","height","src","controls"],"sources":["C:/Users/USER/Desktop/video_editor/video-editor-frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [video, setVideo] = useState(null);\n  const [processedVideo, setProcessedVideo] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [cancelTokenSource, setCancelTokenSource] = useState(null);\n  const [startTime, setStartTime] = useState(\"\");\n  const [endTime, setEndTime] = useState(\"\");\n  const [transcription, setTranscription] = useState(\"\");\n  const [overlay, setOverlay] = useState(null);\n  const videoRef = useRef(null);\n\n  const handleFileChange = (e) => {\n    setVideo(e.target.files[0]);\n  };\n\n  const handleOverlayChange = (e) => {\n    setOverlay(e.target.files[0]);\n  };\n\n  const handleUpload = async () => {\n    if (!video) {\n      toast.error(\"Please upload a video!\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", video);\n    formData.append(\"start_time\", startTime);\n    formData.append(\"end_time\", endTime);\n    if (overlay) {\n      formData.append(\"overlay\", overlay);\n    }\n\n    setLoading(true);\n    setProgress(0);\n\n    const source = axios.CancelToken.source();\n    setCancelTokenSource(source);\n\n    try {\n      const response = await axios.post(\"http://127.0.0.1:8000/api/videos/upload/\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n        cancelToken: source.token,\n      });\n\n      toast.success(\"Video uploaded successfully! Processing started.\");\n      const videoId = response.data.id;\n\n      // Start polling\n      pollProcessingStatus(videoId);\n    } catch (error) {\n      if (axios.isCancel(error)) {\n        toast.info(\"Upload canceled.\");\n      } else {\n        toast.error(\"Error uploading video!\");\n        console.error(error.response?.data || error.message);\n      }\n      setLoading(false);\n    }\n  };\n\n  const pollProcessingStatus = async (videoId) => {\n    try {\n      const response = await axios.get(`http://127.0.0.1:8000/api/videos/status/${videoId}/`);\n      const { progress, video_url, status, transcription } = response.data;\n\n      setProgress(progress);\n\n      if (status === \"completed\") {\n        toast.success(\"Processing completed!\");\n        setProcessedVideo(video_url);\n        setTranscription(transcription);\n        setLoading(false);\n      } else if (status === \"failed\") {\n        toast.error(\"Processing failed!\");\n        setLoading(false);\n      } else {\n        setTimeout(() => pollProcessingStatus(videoId), 3000);\n      }\n    } catch (error) {\n      toast.error(\"Error fetching processing status.\");\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    if (cancelTokenSource) {\n      cancelTokenSource.cancel(\"Upload canceled by the user.\");\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Advanced Video Editor</h1>\n      <input type=\"file\" onChange={handleFileChange} accept=\"video/*\" />\n      <input type=\"file\" onChange={handleOverlayChange} accept=\"image/*\" placeholder=\"Overlay Image\" />\n      <div>\n        <label>\n          Start Time:\n          <input type=\"text\" value={startTime} onChange={(e) => setStartTime(e.target.value)} placeholder=\"00:00:00\" />\n        </label>\n        <label>\n          End Time:\n          <input type=\"text\" value={endTime} onChange={(e) => setEndTime(e.target.value)} placeholder=\"00:00:00\" />\n        </label>\n      </div>\n      <button onClick={handleUpload} disabled={loading}>\n        {loading ? \"Processing...\" : \"Upload and Process\"}\n      </button>\n      {loading && <button onClick={handleCancel}>Cancel</button>}\n      {loading && (\n        <div>\n          <p>Progress: {progress}%</p>\n          <div style={{ width: \"100%\", background: \"#ddd\", height: \"20px\" }}>\n            <div style={{ width: `${progress}%`, background: \"green\", height: \"100%\" }}></div>\n          </div>\n        </div>\n      )}\n      {processedVideo && (\n        <div>\n          <h2>Processed Video</h2>\n          <video src={`http://127.0.0.1:8000${processedVideo}`} controls />\n          <h3>Transcription</h3>\n          <p>{transcription}</p>\n        </div>\n      )}\n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}